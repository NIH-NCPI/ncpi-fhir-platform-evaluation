
import pytest
from fhireval.test_suite.capability_statement import get_resource, get_capability_statement

# Which bullet point do these tests map to
test_id = f"{'2.1.4':<10} - Resource Search Params"

# How much weight do we attribute to the tests in this file
test_weight = 2

@pytest.mark.capability_statement

# Search params
@pytest.mark.parametrize("search_res, search_params", [
	('Account', [('balance', 'quantity'),('identifier', 'token'),('name', 'string'),('owner', 'reference'),('patient', 'reference'),('period', 'date'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('ActivityDefinition', [('composed-of', 'reference'),('date', 'date'),('depends-on', 'reference'),('derived-from', 'reference'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('predecessor', 'reference'),('publisher', 'string'),('status', 'token'),('successor', 'reference'),('title', 'string'),('topic', 'token'),('url', 'uri'),('version', 'token')]),
	('AdverseEvent', [('category', 'token'),('date', 'date'),('location', 'reference'),('reaction', 'reference'),('recorder', 'reference'),('seriousness', 'token'),('study', 'reference'),('subject', 'reference'),('substance', 'reference'),('type', 'token')]),
	('AllergyIntolerance', [('asserter', 'reference'),('category', 'token'),('clinical-status', 'token'),('code', 'token'),('criticality', 'token'),('date', 'date'),('identifier', 'token'),('last-date', 'date'),('manifestation', 'token'),('onset', 'date'),('patient', 'reference'),('recorder', 'reference'),('route', 'token'),('severity', 'token'),('type', 'token'),('verification-status', 'token')]),
	('Appointment', [('actor', 'reference'),('appointment-type', 'token'),('date', 'date'),('identifier', 'token'),('incomingreferral', 'reference'),('location', 'reference'),('part-status', 'token'),('patient', 'reference'),('practitioner', 'reference'),('service-type', 'token'),('status', 'token')]),
	('AppointmentResponse', [('actor', 'reference'),('appointment', 'reference'),('identifier', 'token'),('location', 'reference'),('part-status', 'token'),('patient', 'reference'),('practitioner', 'reference')]),
	('AuditEvent', [('action', 'token'),('address', 'string'),('agent', 'reference'),('agent-name', 'string'),('agent-role', 'token'),('altid', 'token'),('date', 'date'),('entity', 'reference'),('entity-id', 'token'),('entity-name', 'string'),('entity-role', 'token'),('entity-type', 'token'),('outcome', 'token'),('patient', 'reference'),('policy', 'uri'),('site', 'token'),('source', 'token'),('subtype', 'token'),('type', 'token'),('user', 'token')]),
	('Basic', [('author', 'reference'),('code', 'token'),('created', 'date'),('identifier', 'token'),('patient', 'reference'),('subject', 'reference')]),
	('Binary', [('contenttype', 'token')]),
	('BodySite', [('code', 'token'),('identifier', 'token'),('patient', 'reference')]),
	('Bundle', [('composition', 'reference'),('identifier', 'token'),('message', 'reference'),('type', 'token')]),
	('CapabilityStatement', [('date', 'date'),('description', 'string'),('event', 'token'),('fhirversion', 'token'),('format', 'token'),('guide', 'uri'),('jurisdiction', 'token'),('mode', 'token'),('name', 'string'),('publisher', 'string'),('resource', 'token'),('resource-profile', 'reference'),('security-service', 'token'),('software', 'string'),('status', 'token'),('supported-profile', 'reference'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('CarePlan', [('activity-code', 'token'),('activity-date', 'date'),('activity-reference', 'reference'),('author-inc', 'reference'),('based-on', 'reference'),('care-team', 'reference'),('category', 'token'),('condition', 'reference'),('context', 'reference'),('date', 'date'),('definition', 'reference'),('encounter', 'reference'),('goal', 'reference'),('identifier', 'token'),('intent', 'token'),('part-of', 'reference'),('patient', 'reference'),('performer', 'reference'),('replaces', 'reference'),('status', 'token'),('subject', 'reference')]),
	('CareTeam', [('category', 'token'),('context', 'reference'),('date', 'date'),('encounter', 'reference'),('identifier', 'token'),('participant', 'reference'),('patient', 'reference'),('status', 'token'),('subject', 'reference')]),
	('ChargeItem', [('account', 'reference'),('code', 'token'),('context', 'reference'),('entered-date', 'date'),('enterer', 'reference'),('factor-override', 'number'),('identifier', 'token'),('occurrence', 'date'),('participant-actor', 'reference'),('participant-role', 'token'),('patient', 'reference'),('performing-organization', 'reference'),('price-override', 'quantity'),('quantity', 'quantity'),('requesting-organization', 'reference'),('service', 'reference'),('subject', 'reference')]),
	('Claim', [('care-team', 'reference'),('created', 'date'),('encounter', 'reference'),('enterer', 'reference'),('facility', 'reference'),('identifier', 'token'),('insurer', 'reference'),('organization', 'reference'),('patient', 'reference'),('payee', 'reference'),('priority', 'token'),('provider', 'reference'),('use', 'token')]),
	('ClaimResponse', [('created', 'date'),('disposition', 'string'),('identifier', 'token'),('insurer', 'reference'),('outcome', 'token'),('patient', 'reference'),('payment-date', 'date'),('request', 'reference'),('request-provider', 'reference')]),
	('ClinicalImpression', [('action', 'reference'),('assessor', 'reference'),('context', 'reference'),('date', 'date'),('finding-code', 'token'),('finding-ref', 'reference'),('identifier', 'token'),('investigation', 'reference'),('patient', 'reference'),('previous', 'reference'),('problem', 'reference'),('status', 'token'),('subject', 'reference')]),
	('CodeSystem', [('code', 'token'),('content-mode', 'token'),('date', 'date'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('language', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('system', 'uri'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('Communication', [('based-on', 'reference'),('category', 'token'),('context', 'reference'),('definition', 'reference'),('encounter', 'reference'),('identifier', 'token'),('medium', 'token'),('part-of', 'reference'),('patient', 'reference'),('received', 'date'),('recipient', 'reference'),('sender', 'reference'),('sent', 'date'),('status', 'token'),('subject', 'reference')]),
	('CommunicationRequest', [('authored', 'date'),('based-on', 'reference'),('category', 'token'),('context', 'reference'),('encounter', 'reference'),('group-identifier', 'token'),('identifier', 'token'),('medium', 'token'),('occurrence', 'date'),('patient', 'reference'),('priority', 'token'),('recipient', 'reference'),('replaces', 'reference'),('requester', 'reference'),('sender', 'reference'),('status', 'token'),('subject', 'reference')]),
	('CompartmentDefinition', [('code', 'token'),('date', 'date'),('description', 'string'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('resource', 'token'),('status', 'token'),('title', 'string'),('url', 'uri')]),
	('Composition', [('attester', 'reference'),('author', 'reference'),('class', 'token'),('confidentiality', 'token'),('context', 'token'),('date', 'date'),('encounter', 'reference'),('entry', 'reference'),('identifier', 'token'),('patient', 'reference'),('period', 'date'),('related-id', 'token'),('related-ref', 'reference'),('section', 'token'),('status', 'token'),('subject', 'reference'),('title', 'string'),('type', 'token')]),
	('ConceptMap', [('date', 'date'),('dependson', 'uri'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('other', 'uri'),('product', 'uri'),('publisher', 'string'),('source', 'reference'),('source-code', 'token'),('source-system', 'uri'),('source-uri', 'reference'),('status', 'token'),('target', 'reference'),('target-code', 'token'),('target-system', 'uri'),('target-uri', 'reference'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('Condition', [('abatement-age', 'quantity'),('abatement-boolean', 'token'),('abatement-date', 'date'),('abatement-string', 'string'),('asserted-date', 'date'),('asserter', 'reference'),('body-site', 'token'),('category', 'token'),('clinical-status', 'token'),('code', 'token'),('context', 'reference'),('encounter', 'reference'),('evidence', 'token'),('evidence-detail', 'reference'),('identifier', 'token'),('onset-age', 'quantity'),('onset-date', 'date'),('onset-info', 'string'),('patient', 'reference'),('severity', 'token'),('stage', 'token'),('subject', 'reference'),('verification-status', 'token')]),
	('Consent', [('action', 'token'),('actor', 'reference'),('category', 'token'),('consentor', 'reference'),('data', 'reference'),('date', 'date'),('identifier', 'token'),('organization', 'reference'),('patient', 'reference'),('period', 'date'),('purpose', 'token'),('securitylabel', 'token'),('source', 'reference'),('status', 'token')]),
	('Contract', [('agent', 'reference'),('authority', 'reference'),('domain', 'reference'),('identifier', 'token'),('issued', 'date'),('patient', 'reference'),('signer', 'reference'),('subject', 'reference'),('term-topic', 'reference')]),
	('Coverage', [('beneficiary', 'reference'),('class', 'string'),('dependent', 'string'),('group', 'string'),('identifier', 'token'),('payor', 'reference'),('plan', 'string'),('policy-holder', 'reference'),('sequence', 'string'),('subclass', 'string'),('subgroup', 'string'),('subplan', 'string'),('subscriber', 'reference'),('type', 'token')]),
	('DataElement', [('code', 'token'),('date', 'date'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('stringency', 'token'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('DetectedIssue', [('author', 'reference'),('category', 'token'),('date', 'date'),('identifier', 'token'),('implicated', 'reference'),('patient', 'reference')]),
	('Device', [('device-name', 'string'),('identifier', 'token'),('location', 'reference'),('manufacturer', 'string'),('model', 'string'),('organization', 'reference'),('patient', 'reference'),('status', 'token'),('type', 'token'),('udi-carrier', 'string'),('udi-di', 'string'),('url', 'uri')]),
	('DeviceComponent', [('identifier', 'token'),('parent', 'reference'),('source', 'reference'),('type', 'token')]),
	('DeviceMetric', [('category', 'token'),('identifier', 'token'),('parent', 'reference'),('source', 'reference'),('type', 'token')]),
	('DeviceRequest', [('authored-on', 'date'),('based-on', 'reference'),('code', 'token'),('definition', 'reference'),('device', 'reference'),('encounter', 'reference'),('event-date', 'date'),('group-identifier', 'token'),('identifier', 'token'),('intent', 'token'),('patient', 'reference'),('performer', 'reference'),('priorrequest', 'reference'),('requester', 'reference'),('status', 'token'),('subject', 'reference')]),
	('DeviceUseStatement', [('device', 'reference'),('identifier', 'token'),('patient', 'reference'),('subject', 'reference')]),
	('DiagnosticReport', [('based-on', 'reference'),('category', 'token'),('code', 'token'),('context', 'reference'),('date', 'date'),('diagnosis', 'token'),('encounter', 'reference'),('identifier', 'token'),('image', 'reference'),('issued', 'date'),('patient', 'reference'),('performer', 'reference'),('result', 'reference'),('specimen', 'reference'),('status', 'token'),('subject', 'reference')]),
	('DocumentManifest', [('author', 'reference'),('content-ref', 'reference'),('created', 'date'),('description', 'string'),('identifier', 'token'),('patient', 'reference'),('recipient', 'reference'),('related-id', 'token'),('related-ref', 'reference'),('source', 'uri'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('DocumentReference', [('authenticator', 'reference'),('author', 'reference'),('class', 'token'),('created', 'date'),('custodian', 'reference'),('description', 'string'),('encounter', 'reference'),('event', 'token'),('facility', 'token'),('format', 'token'),('identifier', 'token'),('indexed', 'date'),('language', 'token'),('location', 'uri'),('patient', 'reference'),('period', 'date'),('related-id', 'token'),('related-ref', 'reference'),('relatesto', 'reference'),('relation', 'token'),('relationship', 'composite'),('securitylabel', 'token'),('setting', 'token'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('EligibilityRequest', [('created', 'date'),('enterer', 'reference'),('facility', 'reference'),('identifier', 'token'),('organization', 'reference'),('patient', 'reference'),('provider', 'reference')]),
	('EligibilityResponse', [('created', 'date'),('disposition', 'string'),('identifier', 'token'),('insurer', 'reference'),('outcome', 'token'),('request', 'reference'),('request-organization', 'reference'),('request-provider', 'reference')]),
	('Encounter', [('appointment', 'reference'),('class', 'token'),('date', 'date'),('diagnosis', 'reference'),('episodeofcare', 'reference'),('identifier', 'token'),('incomingreferral', 'reference'),('length', 'quantity'),('location', 'reference'),('location-period', 'date'),('part-of', 'reference'),('participant', 'reference'),('participant-type', 'token'),('patient', 'reference'),('practitioner', 'reference'),('reason', 'token'),('service-provider', 'reference'),('special-arrangement', 'token'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('Endpoint', [('connection-type', 'token'),('identifier', 'token'),('name', 'string'),('organization', 'reference'),('payload-type', 'token'),('status', 'token')]),
	('EnrollmentRequest', [('identifier', 'token'),('organization', 'reference'),('patient', 'reference'),('subject', 'reference')]),
	('EnrollmentResponse', [('identifier', 'token'),('organization', 'reference'),('request', 'reference')]),
	('EpisodeOfCare', [('care-manager', 'reference'),('condition', 'reference'),('date', 'date'),('identifier', 'token'),('incomingreferral', 'reference'),('organization', 'reference'),('patient', 'reference'),('status', 'token'),('type', 'token')]),
	('ExpansionProfile', [('date', 'date'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('url', 'uri'),('version', 'token')]),
	('ExplanationOfBenefit', [('care-team', 'reference'),('claim', 'reference'),('coverage', 'reference'),('created', 'date'),('disposition', 'string'),('encounter', 'reference'),('enterer', 'reference'),('facility', 'reference'),('identifier', 'token'),('organization', 'reference'),('patient', 'reference'),('payee', 'reference'),('provider', 'reference')]),
	('FamilyMemberHistory', [('code', 'token'),('date', 'date'),('definition', 'reference'),('gender', 'token'),('identifier', 'token'),('patient', 'reference'),('relationship', 'token'),('status', 'token')]),
	('Flag', [('author', 'reference'),('date', 'date'),('encounter', 'reference'),('identifier', 'token'),('patient', 'reference'),('subject', 'reference')]),
	('Goal', [('category', 'token'),('identifier', 'token'),('patient', 'reference'),('start-date', 'date'),('status', 'token'),('subject', 'reference'),('target-date', 'date')]),
	('GraphDefinition', [('date', 'date'),('description', 'string'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('start', 'token'),('status', 'token'),('url', 'uri'),('version', 'token')]),
	('Group', [('actual', 'token'),('characteristic', 'token'),('characteristic-value', 'composite'),('code', 'token'),('exclude', 'token'),('identifier', 'token'),('member', 'reference'),('type', 'token'),('value', 'token')]),
	('GuidanceResponse', [('identifier', 'token'),('patient', 'reference'),('request', 'token'),('subject', 'reference')]),
	('HealthcareService', [('active', 'token'),('category', 'token'),('characteristic', 'token'),('endpoint', 'reference'),('identifier', 'token'),('location', 'reference'),('name', 'string'),('organization', 'reference'),('programname', 'string'),('type', 'token')]),
	('ImagingManifest', [('author', 'reference'),('authoring-time', 'date'),('endpoint', 'reference'),('identifier', 'token'),('imaging-study', 'reference'),('patient', 'reference'),('selected-study', 'uri')]),
	('ImagingStudy', [('accession', 'token'),('basedon', 'reference'),('bodysite', 'token'),('context', 'reference'),('dicom-class', 'uri'),('endpoint', 'reference'),('identifier', 'token'),('modality', 'token'),('patient', 'reference'),('performer', 'reference'),('reason', 'token'),('series', 'uri'),('started', 'date'),('study', 'uri'),('uid', 'uri')]),
	('Immunization', [('date', 'date'),('dose-sequence', 'number'),('identifier', 'token'),('location', 'reference'),('lot-number', 'string'),('manufacturer', 'reference'),('notgiven', 'token'),('patient', 'reference'),('practitioner', 'reference'),('reaction', 'reference'),('reaction-date', 'date'),('reason', 'token'),('reason-not-given', 'token'),('status', 'token'),('vaccine-code', 'token')]),
	('ImmunizationRecommendation', [('date', 'date'),('dose-number', 'number'),('dose-sequence', 'number'),('identifier', 'token'),('information', 'reference'),('patient', 'reference'),('status', 'token'),('support', 'reference'),('target-disease', 'token'),('vaccine-type', 'token')]),
	('ImplementationGuide', [('date', 'date'),('dependency', 'uri'),('description', 'string'),('experimental', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('resource', 'reference'),('status', 'token'),('url', 'uri'),('version', 'token')]),
	('Library', [('composed-of', 'reference'),('date', 'date'),('depends-on', 'reference'),('derived-from', 'reference'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('predecessor', 'reference'),('publisher', 'string'),('status', 'token'),('successor', 'reference'),('title', 'string'),('topic', 'token'),('url', 'uri'),('version', 'token')]),
	('Linkage', [('author', 'reference')]),
	('List', [('code', 'token'),('date', 'date'),('empty-reason', 'token'),('encounter', 'reference'),('identifier', 'token'),('item', 'reference'),('notes', 'string'),('patient', 'reference'),('source', 'reference'),('status', 'token'),('subject', 'reference'),('title', 'string')]),
	('Location', [('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('endpoint', 'reference'),('identifier', 'token'),('name', 'string'),('near', 'token'),('near-distance', 'quantity'),('operational-status', 'token'),('organization', 'reference'),('partof', 'reference'),('status', 'token'),('type', 'token')]),
	('Measure', [('composed-of', 'reference'),('date', 'date'),('depends-on', 'reference'),('derived-from', 'reference'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('predecessor', 'reference'),('publisher', 'string'),('status', 'token'),('successor', 'reference'),('title', 'string'),('topic', 'token'),('url', 'uri'),('version', 'token')]),
	('MeasureReport', [('identifier', 'token'),('patient', 'reference'),('status', 'token')]),
	('Media', [('based-on', 'reference'),('context', 'reference'),('created', 'date'),('date', 'date'),('device', 'reference'),('identifier', 'token'),('operator', 'reference'),('patient', 'reference'),('site', 'token'),('subject', 'reference'),('subtype', 'token'),('type', 'token'),('view', 'token')]),
	('Medication', [('code', 'token'),('container', 'token'),('form', 'token'),('ingredient', 'reference'),('ingredient-code', 'token'),('manufacturer', 'reference'),('over-the-counter', 'token'),('package-item', 'reference'),('package-item-code', 'token'),('status', 'token')]),
	('MedicationAdministration', [('category', 'token'),('code', 'token'),('context', 'reference'),('device', 'reference'),('effective-time', 'date'),('identifier', 'token'),('medication', 'reference'),('not-given', 'token'),('patient', 'reference'),('performer', 'reference'),('prescription', 'reference'),('reason-given', 'token'),('reason-not-given', 'token'),('status', 'token'),('subject', 'reference')]),
	('MedicationDispense', [('category', 'token'),('code', 'token'),('context', 'reference'),('destination', 'reference'),('identifier', 'token'),('medication', 'reference'),('patient', 'reference'),('performer', 'reference'),('periodofuse', 'date'),('prescription', 'reference'),('receiver', 'reference'),('responsibleparty', 'reference'),('status', 'token'),('subject', 'reference'),('type', 'token'),('whenhandedover', 'date'),('whenprepared', 'date')]),
	('MedicationRequest', [('authoredon', 'date'),('category', 'token'),('code', 'token'),('context', 'reference'),('date', 'date'),('identifier', 'token'),('intended-dispenser', 'reference'),('intent', 'token'),('medication', 'reference'),('patient', 'reference'),('periodofuse', 'date'),('priority', 'token'),('requester', 'reference'),('status', 'token'),('subject', 'reference')]),
	('MedicationStatement', [('category', 'token'),('code', 'token'),('context', 'reference'),('effective', 'date'),('identifier', 'token'),('medication', 'reference'),('part-of', 'reference'),('patient', 'reference'),('source', 'reference'),('status', 'token'),('subject', 'reference')]),
	('MessageDefinition', [('category', 'token'),('date', 'date'),('description', 'string'),('event', 'token'),('focus', 'token'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('MessageHeader', [('author', 'reference'),('code', 'token'),('destination', 'string'),('destination-uri', 'uri'),('enterer', 'reference'),('event', 'token'),('focus', 'reference'),('receiver', 'reference'),('response-id', 'token'),('responsible', 'reference'),('sender', 'reference'),('source', 'string'),('source-uri', 'uri'),('target', 'reference'),('timestamp', 'date')]),
	('NamingSystem', [('contact', 'string'),('date', 'date'),('description', 'string'),('id-type', 'token'),('jurisdiction', 'token'),('kind', 'token'),('name', 'string'),('period', 'date'),('publisher', 'string'),('replaced-by', 'reference'),('responsible', 'string'),('status', 'token'),('telecom', 'token'),('type', 'token'),('value', 'string')]),
	('NutritionOrder', [('additive', 'token'),('datetime', 'date'),('encounter', 'reference'),('formula', 'token'),('identifier', 'token'),('oraldiet', 'token'),('patient', 'reference'),('provider', 'reference'),('status', 'token'),('supplement', 'token')]),
	('Observation', [('based-on', 'reference'),('category', 'token'),('code', 'token'),('code-value-concept', 'composite'),('code-value-date', 'composite'),('code-value-quantity', 'composite'),('code-value-string', 'composite'),('combo-code', 'token'),('combo-code-value-concept', 'composite'),('combo-code-value-quantity', 'composite'),('combo-data-absent-reason', 'token'),('combo-value-concept', 'token'),('combo-value-quantity', 'quantity'),('component-code', 'token'),('component-code-value-concept', 'composite'),('component-code-value-quantity', 'composite'),('component-data-absent-reason', 'token'),('component-value-concept', 'token'),('component-value-quantity', 'quantity'),('context', 'reference'),('data-absent-reason', 'token'),('date', 'date'),('device', 'reference'),('encounter', 'reference'),('identifier', 'token'),('method', 'token'),('patient', 'reference'),('performer', 'reference'),('related', 'composite'),('related-target', 'reference'),('related-type', 'token'),('specimen', 'reference'),('status', 'token'),('subject', 'reference'),('value-concept', 'token'),('value-date', 'date'),('value-quantity', 'quantity'),('value-string', 'string')]),
	('OperationDefinition', [('base', 'reference'),('code', 'token'),('date', 'date'),('description', 'string'),('instance', 'token'),('jurisdiction', 'token'),('kind', 'token'),('name', 'string'),('param-profile', 'reference'),('publisher', 'string'),('status', 'token'),('system', 'token'),('type', 'token'),('url', 'uri'),('version', 'token')]),
	('OperationOutcome', []),
	('Organization', [('active', 'token'),('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('endpoint', 'reference'),('identifier', 'token'),('name', 'string'),('partof', 'reference'),('phonetic', 'string'),('type', 'token')]),
	('Parameters', []),
	('Patient', [('active', 'token'),('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('animal-breed', 'token'),('animal-species', 'token'),('birthdate', 'date'),('death-date', 'date'),('deceased', 'token'),('email', 'token'),('family', 'string'),('gender', 'token'),('general-practitioner', 'reference'),('given', 'string'),('identifier', 'token'),('language', 'token'),('link', 'reference'),('name', 'string'),('organization', 'reference'),('phone', 'token'),('phonetic', 'string'),('telecom', 'token')]),
	('PaymentNotice', [('created', 'date'),('identifier', 'token'),('organization', 'reference'),('payment-status', 'token'),('provider', 'reference'),('request', 'reference'),('response', 'reference'),('statusdate', 'date')]),
	('PaymentReconciliation', [('created', 'date'),('disposition', 'string'),('identifier', 'token'),('organization', 'reference'),('outcome', 'token'),('request', 'reference'),('request-organization', 'reference'),('request-provider', 'reference')]),
	('Person', [('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('birthdate', 'date'),('email', 'token'),('gender', 'token'),('identifier', 'token'),('link', 'reference'),('name', 'string'),('organization', 'reference'),('patient', 'reference'),('phone', 'token'),('phonetic', 'string'),('practitioner', 'reference'),('relatedperson', 'reference'),('telecom', 'token')]),
	('PlanDefinition', [('composed-of', 'reference'),('date', 'date'),('depends-on', 'reference'),('derived-from', 'reference'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('predecessor', 'reference'),('publisher', 'string'),('status', 'token'),('successor', 'reference'),('title', 'string'),('topic', 'token'),('url', 'uri'),('version', 'token')]),
	('Practitioner', [('active', 'token'),('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('communication', 'token'),('email', 'token'),('family', 'string'),('gender', 'token'),('given', 'string'),('identifier', 'token'),('name', 'string'),('phone', 'token'),('phonetic', 'string'),('telecom', 'token')]),
	('PractitionerRole', [('active', 'token'),('date', 'date'),('email', 'token'),('endpoint', 'reference'),('identifier', 'token'),('location', 'reference'),('organization', 'reference'),('phone', 'token'),('practitioner', 'reference'),('role', 'token'),('service', 'reference'),('specialty', 'token'),('telecom', 'token')]),
	('Procedure', [('based-on', 'reference'),('category', 'token'),('code', 'token'),('context', 'reference'),('date', 'date'),('definition', 'reference'),('encounter', 'reference'),('identifier', 'token'),('location', 'reference'),('part-of', 'reference'),('patient', 'reference'),('performer', 'reference'),('status', 'token'),('subject', 'reference')]),
	('ProcedureRequest', [('authored', 'date'),('based-on', 'reference'),('body-site', 'token'),('code', 'token'),('context', 'reference'),('definition', 'reference'),('encounter', 'reference'),('identifier', 'token'),('intent', 'token'),('occurrence', 'date'),('patient', 'reference'),('performer', 'reference'),('performer-type', 'token'),('priority', 'token'),('replaces', 'reference'),('requester', 'reference'),('requisition', 'token'),('specimen', 'reference'),('status', 'token'),('subject', 'reference')]),
	('ProcessRequest', [('action', 'token'),('identifier', 'token'),('organization', 'reference'),('provider', 'reference')]),
	('ProcessResponse', [('identifier', 'token'),('organization', 'reference'),('request', 'reference'),('request-organization', 'reference'),('request-provider', 'reference')]),
	('Provenance', [('agent', 'reference'),('agent-role', 'token'),('end', 'date'),('entity-id', 'token'),('entity-ref', 'reference'),('location', 'reference'),('patient', 'reference'),('recorded', 'date'),('signature-type', 'token'),('start', 'date'),('target', 'reference')]),
	('Questionnaire', [('code', 'token'),('date', 'date'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('QuestionnaireResponse', [('author', 'reference'),('authored', 'date'),('based-on', 'reference'),('context', 'reference'),('identifier', 'token'),('parent', 'reference'),('patient', 'reference'),('questionnaire', 'reference'),('source', 'reference'),('status', 'token'),('subject', 'reference')]),
	('ReferralRequest', [('authored-on', 'date'),('based-on', 'reference'),('context', 'reference'),('definition', 'reference'),('encounter', 'reference'),('group-identifier', 'token'),('identifier', 'token'),('intent', 'token'),('occurrence-date', 'date'),('patient', 'reference'),('priority', 'token'),('recipient', 'reference'),('replaces', 'reference'),('requester', 'reference'),('service', 'token'),('specialty', 'token'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('RelatedPerson', [('active', 'token'),('address', 'string'),('address-city', 'string'),('address-country', 'string'),('address-postalcode', 'string'),('address-state', 'string'),('address-use', 'token'),('birthdate', 'date'),('email', 'token'),('gender', 'token'),('identifier', 'token'),('name', 'string'),('patient', 'reference'),('phone', 'token'),('phonetic', 'string'),('telecom', 'token')]),
	('RequestGroup', [('author', 'reference'),('authored', 'date'),('context', 'reference'),('definition', 'reference'),('encounter', 'reference'),('group-identifier', 'token'),('identifier', 'token'),('intent', 'token'),('participant', 'reference'),('patient', 'reference'),('priority', 'token'),('status', 'token'),('subject', 'reference')]),
	('ResearchStudy', [('category', 'token'),('date', 'date'),('focus', 'token'),('identifier', 'token'),('jurisdiction', 'token'),('keyword', 'token'),('partof', 'reference'),('principalinvestigator', 'reference'),('protocol', 'reference'),('site', 'reference'),('sponsor', 'reference'),('status', 'token'),('title', 'string')]),
	('ResearchSubject', [('date', 'date'),('identifier', 'token'),('individual', 'reference'),('patient', 'reference'),('status', 'token')]),
	('RiskAssessment', [('condition', 'reference'),('date', 'date'),('encounter', 'reference'),('identifier', 'token'),('method', 'token'),('patient', 'reference'),('performer', 'reference'),('probability', 'number'),('risk', 'token'),('subject', 'reference')]),
	('Schedule', [('active', 'token'),('actor', 'reference'),('date', 'date'),('identifier', 'token'),('type', 'token')]),
	('SearchParameter', [('base', 'token'),('code', 'token'),('component', 'reference'),('date', 'date'),('derived-from', 'uri'),('description', 'string'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('target', 'token'),('type', 'token'),('url', 'uri'),('version', 'token')]),
	('Sequence', [('chromosome', 'token'),('coordinate', 'composite'),('end', 'number'),('identifier', 'token'),('patient', 'reference'),('start', 'number'),('type', 'token')]),
	('ServiceDefinition', [('composed-of', 'reference'),('date', 'date'),('depends-on', 'reference'),('derived-from', 'reference'),('description', 'string'),('effective', 'date'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('predecessor', 'reference'),('publisher', 'string'),('status', 'token'),('successor', 'reference'),('title', 'string'),('topic', 'token'),('url', 'uri'),('version', 'token')]),
	('Slot', [('identifier', 'token'),('schedule', 'reference'),('slot-type', 'token'),('start', 'date'),('status', 'token')]),
	('Specimen', [('accession', 'token'),('bodysite', 'token'),('collected', 'date'),('collector', 'reference'),('container', 'token'),('container-id', 'token'),('identifier', 'token'),('parent', 'reference'),('patient', 'reference'),('status', 'token'),('subject', 'reference'),('type', 'token')]),
	('StructureDefinition', [('abstract', 'token'),('base', 'uri'),('base-path', 'token'),('context-type', 'token'),('date', 'date'),('derivation', 'token'),('description', 'string'),('experimental', 'token'),('ext-context', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('keyword', 'token'),('kind', 'token'),('name', 'string'),('path', 'token'),('publisher', 'string'),('status', 'token'),('title', 'string'),('type', 'token'),('url', 'uri'),('valueset', 'reference'),('version', 'token')]),
	('StructureMap', [('date', 'date'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('Subscription', [('add-tag', 'token'),('contact', 'token'),('criteria', 'string'),('payload', 'string'),('status', 'token'),('type', 'token'),('url', 'uri')]),
	('Substance', [('category', 'token'),('code', 'token'),('container-identifier', 'token'),('expiry', 'date'),('identifier', 'token'),('quantity', 'quantity'),('status', 'token'),('substance-reference', 'reference')]),
	('SupplyDelivery', [('identifier', 'token'),('patient', 'reference'),('receiver', 'reference'),('status', 'token'),('supplier', 'reference')]),
	('SupplyRequest', [('category', 'token'),('date', 'date'),('identifier', 'token'),('requester', 'reference'),('status', 'token'),('supplier', 'reference')]),
	('Task', [('authored-on', 'date'),('based-on', 'reference'),('business-status', 'token'),('code', 'token'),('context', 'reference'),('focus', 'reference'),('group-identifier', 'token'),('identifier', 'token'),('intent', 'token'),('modified', 'date'),('organization', 'reference'),('owner', 'reference'),('part-of', 'reference'),('patient', 'reference'),('performer', 'token'),('period', 'date'),('priority', 'token'),('requester', 'reference'),('status', 'token'),('subject', 'reference')]),
	('TestReport', [('identifier', 'token'),('issued', 'date'),('participant', 'uri'),('result', 'token'),('tester', 'string'),('testscript', 'reference')]),
	('TestScript', [('date', 'date'),('description', 'string'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('status', 'token'),('testscript-capability', 'string'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('ValueSet', [('date', 'date'),('description', 'string'),('expansion', 'uri'),('identifier', 'token'),('jurisdiction', 'token'),('name', 'string'),('publisher', 'string'),('reference', 'uri'),('status', 'token'),('title', 'string'),('url', 'uri'),('version', 'token')]),
	('VisionPrescription', [('datewritten', 'date'),('encounter', 'reference'),('identifier', 'token'),('patient', 'reference'),('prescriber', 'reference')])
])


def test_search_params(host, search_res, search_params):
    res = get_resource(host, search_res)

    params = {}
    for sp in res['searchParam']:
        params[sp['name']]  = sp['type']

    for (sname, stype) in search_params:
        assert stype == params[sname], f"searchParam {sname} is {stype}"

